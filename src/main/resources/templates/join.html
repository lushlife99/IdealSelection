<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>joinPage</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="/js/idealFunctions.js"></script>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

</head>
<body>
<div class="d-flex justify-content-center align-items-center vh-100">
    <div class="root">
        <h2>회원가입</h2>
        <p>이미 계정이 있으신가요? <a href="/login">로그인</a></p>
        <form action="/api/join" method="post">
            <div class="form-group">
                <label for="userId">ID:</label>
                <input type="text" class="form-control" id="userId" name="userId" required>
            </div>
            <div class="form-group">
                <label for="userName">이름:</label>
                <input type="text" class="form-control" id="userName" name="userName" required>
            </div>
            <div class="form-group">
                <label for="password">비밀번호:</label>
                <input type="password" class="form-control" id="password" name="password" required>
            </div>
            <button class="btn btn-primary" onclick="join()">가입하기</button>
        </form>
    </div>
</div>
</body>
</html>
<script th:inline="javascript">
    function join() {
        var userId = $('#userId').val();
        var password = $('#password').val();
        var userName = $('#userName').val();

        var data = {
            userId: userId,
            password: password,
            userName: userName
        };

        $.ajax({
            type: 'POST',
            url: '/api/auth/join',
            contentType: 'application/x-www-form-urlencoded',
            data: data,
            success: function (response) {
                console.log("asdfasdf");
                window.location.href = 'http://localhost:8080/login';
            },
            error: function (error) {
                alert(error.responseJSON.message);
            }
        });
    }
</script>
